{"version":3,"file":"src_app_login_login_module_ts.js","mappings":"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","sources":["./src/app/login/login-routing.module.ts","./src/app/login/login.module.ts","./src/app/login/login.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { LoginPage } from './login.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: LoginPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class LoginPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule,ReactiveFormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { LoginPageRoutingModule } from './login-routing.module';\r\n\r\nimport { LoginPage } from './login.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,    \r\n    IonicModule,\r\n    FormsModule,ReactiveFormsModule,\r\n    LoginPageRoutingModule\r\n  ],\r\n  declarations: [LoginPage]\r\n})\r\nexport class LoginPageModule {}\r\n","/* eslint-disable @typescript-eslint/naming-convention */\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { ToastController, NavController } from '@ionic/angular';\r\nimport { ModalController } from '@ionic/angular';\r\nimport { Storage } from '@ionic/storage';\r\nimport { Router } from '@angular/router';\r\nimport { AlertController } from '@ionic/angular';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\nimport {HttpClient, HttpHeaders} from '@angular/common/http';\r\nimport { FormBuilder,Validators,FormGroup } from '@angular/forms';\r\n\r\nimport { AppConfig } from '../config';\r\nimport { IniciarusuarioService } from '../iniciarusuario.service';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.page.html',\r\n  styleUrls: ['./login.page.scss'],\r\n})\r\nexport class LoginPage implements OnInit {\r\n  okok: any;\r\n  isLoggedIn = false;  \r\n  idConductor: any;\r\n  public loginForm: FormGroup;\r\n  urlRoot: string = AppConfig.urlRoot;\r\n  constructor(public toastController: ToastController,\r\n    public alertController: AlertController,\r\n    public router: Router, public inicia: IniciarusuarioService, \r\n    private http: HttpClient,\r\n    private modalController: ModalController,\r\n    private navCtrl: NavController,public route: ActivatedRoute, public Str: Storage,public fb: FormBuilder,\r\n    ) {\r\n\r\n      this.loginForm = this.fb.group({\r\n        usuario:['',[Validators.required,Validators.minLength(5),Validators.email]], \r\n        password:['',[Validators.required,Validators.minLength(6)]]\r\n      });\r\n\r\n\r\n  }\r\n  login3(){\r\n    const headers: any\t\t= new HttpHeaders({'Content-Type' : 'application/octet-stream'});\r\n    const USUARIO: any = this.loginForm.value.usuario;\r\n    const PASSWORD: any = this.loginForm.value.password;\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    const options: any\t\t= {USUARIO,PASSWORD};\r\n    //options \t: any\t\t= { \"idNEGOCIOS\": '1' };\r\n     \r\n    this.okok=(this.http.post(this.urlRoot +'/index.php/Api/iniciarSesion/',\r\n    JSON.stringify(options), headers))\r\n    //probar crear otra consulta q devuelva valores location y stopover en api php.\r\n    .subscribe(\r\n      (res: any) => {\r\n      this.okok=res;\r\n      //\r\n\r\n      this.Str.set('datos_user', res)\r\n      .then(\r\n        (data) =>\r\n        {\r\n          //console.log('data',data)\r\n         // this.loginExitoso();\r\n          //this.getNotificaciones(data['0'].idCONDUCTORES);\r\n          this.navCtrl.navigateRoot('/tab1');\r\n          this.isLoggedIn = true;\r\n       },\r\n        error => console.error('Error storing item', error),\r\n        );\r\n        return this.isLoggedIn;\r\n     },\r\n     (error: any) =>{\r\n       this.presentAlert();\r\n      console.log('error',error);\r\n\r\n     }\r\n     );\r\n    }\r\n  registrarme(){\r\n    this.router.navigate(['/registro']);\r\n  }\r\n  async loginExitoso() {\r\n\r\n    const result: any = await this.Str.get('datos_user');\r\n\r\n    const toast = await this.toastController.create({\r\n      message: 'Hola '+result[0].NOMBRE+' '+result[0].APELLIDO+'!',\r\n      duration: 2000,\r\n    position: 'top',\r\n    //showCloseButton: true,\r\n    //closeButtonText:\"Cerrar\",\r\n    });\r\n    toast.present();\r\n  }\r\n  async presentAlert() {\r\n    const alert = await this.alertController.create({\r\n      header: 'Usuario y/o contrase√±a incorrectos',\r\n      message: 'Intente nuevamente',\r\n      buttons: ['Aceptar']\r\n    });\r\n\r\n    await alert.present();\r\n  }\r\n\r\n\r\n  async ngOnInit() {\r\n    await this.Str.create();\r\n    this.inicia.verificar()\r\n  }\r\n\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///"}